const _0x286d5a=_0x34c8;(function(_0x2467cf,_0x38d61d){const _0x1a4f18=_0x34c8,_0x57d263=_0x2467cf();while(!![]){try{const _0x120335=-parseInt(_0x1a4f18(0x20f))/0x1*(parseInt(_0x1a4f18(0x11f))/0x2)+parseInt(_0x1a4f18(0x252))/0x3+parseInt(_0x1a4f18(0x1c7))/0x4+-parseInt(_0x1a4f18(0x20a))/0x5+parseInt(_0x1a4f18(0x139))/0x6+parseInt(_0x1a4f18(0x1e8))/0x7*(-parseInt(_0x1a4f18(0x1c0))/0x8)+parseInt(_0x1a4f18(0x1ab))/0x9;if(_0x120335===_0x38d61d)break;else _0x57d263['push'](_0x57d263['shift']());}catch(_0x8b1cb1){_0x57d263['push'](_0x57d263['shift']());}}}(_0x4fd6,0x23193));const os=require('os'),fs=require('fs'),net=require(_0x286d5a(0x172)),dns=require(_0x286d5a(0x228)),http=require(_0x286d5a(0x1d0)),path=require(_0x286d5a(0x266)),axios=require(_0x286d5a(0x124)),{Buffer}=require(_0x286d5a(0x1af)),{exec}=require(_0x286d5a(0x11d)),UUID=process[_0x286d5a(0x150)][_0x286d5a(0x15a)]||'a2056d0d-c98e-4aeb-9aab-37f64edd5710',NEZHA_SERVER=process[_0x286d5a(0x150)][_0x286d5a(0x1fd)]||'',NEZHA_PORT=process[_0x286d5a(0x150)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x286d5a(0x150)][_0x286d5a(0x22a)]||'',AUTO_ACCESS=process[_0x286d5a(0x150)][_0x286d5a(0x155)]||![],XPATH=process[_0x286d5a(0x150)][_0x286d5a(0x22d)]||UUID[_0x286d5a(0x211)](0x0,0x8),SUB_PATH=process['env'][_0x286d5a(0x200)]||_0x286d5a(0x1ca),DOMAIN=process['env'][_0x286d5a(0x184)]||'',NAME=process[_0x286d5a(0x150)][_0x286d5a(0x16d)]||'',PORT=process[_0x286d5a(0x150)][_0x286d5a(0x1aa)]||0xbb8,SETTINGS={[_0x286d5a(0x15a)]:UUID,[_0x286d5a(0x14c)]:_0x286d5a(0x12f),['BUFFER_SIZE']:_0x286d5a(0x1cd),[_0x286d5a(0x22d)]:_0x286d5a(0x1df)+XPATH,[_0x286d5a(0x177)]:0x32,['MAX_POST_SIZE']:0x1e8480,[_0x286d5a(0x168)]:0x7530,[_0x286d5a(0x17c)]:0x40*0x400,[_0x286d5a(0x1ba)]:!![],[_0x286d5a(0x13f)]:!![],[_0x286d5a(0x24d)]:0xea60,[_0x286d5a(0x245)]:0x493e0,[_0x286d5a(0x1ea)]:0x64,[_0x286d5a(0x1b8)]:0x40*0x400,[_0x286d5a(0x217)]:0x40*0x400,[_0x286d5a(0x13b)]:0xa,[_0x286d5a(0x24b)]:![]},customDnsResolver={'servers':['1.1.1.1',_0x286d5a(0x192)],'currentServerIndex':0x0,async 'resolve'(_0x16f417){const _0x12ff90=_0x286d5a,_0x25066a=this['servers'];let _0x13194f;for(let _0x5757dd=0x0;_0x5757dd<_0x25066a[_0x12ff90(0x162)];_0x5757dd++){const _0x5185cc=(this['currentServerIndex']+_0x5757dd)%_0x25066a[_0x12ff90(0x162)],_0x49da31=_0x25066a[_0x5185cc];try{log(_0x12ff90(0x219),_0x12ff90(0x16f)+_0x16f417+_0x12ff90(0x207)+_0x49da31);const _0x35a82f=await this[_0x12ff90(0x138)](_0x16f417,_0x49da31);return this['currentServerIndex']=(_0x5185cc+0x1)%_0x25066a[_0x12ff90(0x162)],log('debug',_0x12ff90(0x133)+_0x16f417+_0x12ff90(0x246)+_0x35a82f+_0x12ff90(0x179)+_0x49da31),_0x35a82f;}catch(_0x10733a){_0x13194f=_0x10733a,log(_0x12ff90(0x1a5),_0x12ff90(0x20e)+_0x49da31+':\x20'+_0x10733a['message']);}}throw new Error(_0x12ff90(0x1b6)+_0x13194f?.['message']);},async 'resolveWithServer'(_0x47a64e,_0x58d0b8){return new Promise((_0x59335f,_0x57d67)=>{const _0x1e368c=_0x34c8,_0x46dbb4=require('dns'),_0x2eecaf=_0x46dbb4[_0x1e368c(0x23c)]();_0x46dbb4[_0x1e368c(0x199)]([_0x58d0b8]),_0x46dbb4[_0x1e368c(0x163)](_0x47a64e,(_0x5709b2,_0x19801d)=>{const _0x431fd7=_0x1e368c;_0x46dbb4[_0x431fd7(0x199)](_0x2eecaf);if(_0x5709b2)_0x57d67(_0x5709b2);else _0x19801d&&_0x19801d[_0x431fd7(0x162)]>0x0?_0x59335f(_0x19801d[0x0]):_0x57d67(new Error(_0x431fd7(0x153)));});});}};dns[_0x286d5a(0x1fb)](_0x286d5a(0x205)),dns[_0x286d5a(0x199)]([_0x286d5a(0x212),'8.8.8.8']);function validate_uuid(_0x17609c,_0x9e627e){for(let _0x31e599=0x0;_0x31e599<0x10;_0x31e599++){if(_0x17609c[_0x31e599]!==_0x9e627e[_0x31e599])return![];}return!![];}function concat_typed_arrays(_0xa13d2,..._0x18f783){const _0x1a1f78=_0x286d5a;if(!_0x18f783||_0x18f783[_0x1a1f78(0x162)]<0x1)return _0xa13d2;let _0x410f6e=_0xa13d2[_0x1a1f78(0x162)];for(let _0x2943fe of _0x18f783)_0x410f6e+=_0x2943fe[_0x1a1f78(0x162)];const _0x2907c5=new _0xa13d2[(_0x1a1f78(0x24a))](_0x410f6e);_0x2907c5['set'](_0xa13d2,0x0),_0x410f6e=_0xa13d2['length'];for(let _0x57507f of _0x18f783){_0x2907c5[_0x1a1f78(0x156)](_0x57507f,_0x410f6e),_0x410f6e+=_0x57507f[_0x1a1f78(0x162)];}return _0x2907c5;}function log(_0x45adf4,..._0x1d90b3){const _0x9d4918=_0x286d5a;if(SETTINGS[_0x9d4918(0x14c)]===_0x9d4918(0x12f))return;const _0x254f17={'debug':0x0,'info':0x1,'warn':0x2,'error':0x3},_0x49a009={'debug':_0x9d4918(0x159),'info':_0x9d4918(0x19f),'warn':_0x9d4918(0x16e),'error':'\x1b[31m','reset':'\x1b[0m'},_0xa87d42=_0x254f17[SETTINGS['LOG_LEVEL']]||0x1,_0x1a2c31=_0x254f17[_0x45adf4]||0x0;if(_0x1a2c31>=_0xa87d42){const _0xd924a8=new Date()[_0x9d4918(0x222)](),_0x27f288=_0x49a009[_0x45adf4]||_0x49a009[_0x9d4918(0x126)];console[_0x9d4918(0x15e)](_0x27f288+'['+_0xd924a8+_0x9d4918(0x1ff)+_0x45adf4+']',..._0x1d90b3,_0x49a009[_0x9d4918(0x126)]);}}const getDownloadUrl=()=>{const _0x3ad0cd=_0x286d5a,_0x483599=os[_0x3ad0cd(0x14b)]();return _0x483599==='arm'||_0x483599===_0x3ad0cd(0x149)||_0x483599==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x3ad0cd(0x258):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x3ad0cd(0x181);},downloadFile=async()=>{const _0x2e98b=_0x286d5a;if(!NEZHA_KEY)return;try{const _0x721d34=getDownloadUrl(),_0x3910c5=await axios({'method':_0x2e98b(0x1c4),'url':_0x721d34,'responseType':_0x2e98b(0x214)}),_0x3ea830=fs[_0x2e98b(0x198)](_0x2e98b(0x1b0));return _0x3910c5[_0x2e98b(0x20b)][_0x2e98b(0x250)](_0x3ea830),new Promise((_0x5b4f20,_0x3aaf4a)=>{const _0x4941a7=_0x2e98b;_0x3ea830['on'](_0x4941a7(0x17a),()=>{const _0x14a2a8=_0x4941a7;console[_0x14a2a8(0x15e)](_0x14a2a8(0x144)),exec(_0x14a2a8(0x23a),_0x2aa1f2=>{if(_0x2aa1f2)_0x3aaf4a(_0x2aa1f2);_0x5b4f20();});}),_0x3ea830['on'](_0x4941a7(0x232),_0x3aaf4a);});}catch(_0x3580f5){throw _0x3580f5;}},runnz=async()=>{const _0x4c9cf3=_0x286d5a;await downloadFile();let _0x124c44='',_0xd2fd1='';if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4d6847=['443',_0x4c9cf3(0x1de),_0x4c9cf3(0x157),_0x4c9cf3(0x225),'2083',_0x4c9cf3(0x238)];_0x124c44=_0x4d6847[_0x4c9cf3(0x15d)](NEZHA_PORT)?_0x4c9cf3(0x18b):'',_0xd2fd1=_0x4c9cf3(0x1bb)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4c9cf3(0x1bd)+NEZHA_KEY+'\x20'+_0x124c44+_0x4c9cf3(0x176);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x904f77=NEZHA_SERVER[_0x4c9cf3(0x15d)](':')?NEZHA_SERVER[_0x4c9cf3(0x1a1)](':')[_0x4c9cf3(0x21d)]():'',_0x443545=new Set(['443','8443',_0x4c9cf3(0x157),_0x4c9cf3(0x225),_0x4c9cf3(0x240),_0x4c9cf3(0x238)]),_0xbe49e5=_0x443545[_0x4c9cf3(0x147)](_0x904f77)?_0x4c9cf3(0x186):_0x4c9cf3(0x1d4),_0x2c837b=_0x4c9cf3(0x262)+NEZHA_KEY+_0x4c9cf3(0x136)+NEZHA_SERVER+_0x4c9cf3(0x256)+_0xbe49e5+_0x4c9cf3(0x208)+UUID;fs[_0x4c9cf3(0x154)](_0x4c9cf3(0x160),_0x2c837b);}_0xd2fd1='nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else return;}try{exec(_0xd2fd1,{'shell':_0x4c9cf3(0x242)}),console[_0x4c9cf3(0x15e)]('npm\x20is\x20running');}catch(_0x283b42){console['error'](_0x4c9cf3(0x14f)+_0x283b42);}};async function addAccessTask(){const _0x2c7712=_0x286d5a;if(AUTO_ACCESS!==!![])return;try{if(!DOMAIN)return;const _0x54c818=_0x2c7712(0x135)+DOMAIN,_0x4290ad=_0x2c7712(0x14d)+_0x54c818+_0x2c7712(0x1c2);exec(_0x4290ad,(_0x24acf9,_0x11c4a6,_0x5dcb9a)=>{const _0x1d8cad=_0x2c7712;if(_0x24acf9){console[_0x1d8cad(0x232)]('Error\x20sending\x20request:',_0x24acf9[_0x1d8cad(0x1ac)]);return;}console['log'](_0x1d8cad(0x188),_0x11c4a6);});}catch(_0x13ce6f){console[_0x2c7712(0x232)](_0x2c7712(0x1c6),_0x13ce6f[_0x2c7712(0x1ac)]);}}function parse_uuid(_0x488544){const _0x238812=_0x286d5a;_0x488544=_0x488544['replaceAll']('-','');const _0x1c23a9=[];for(let _0x11ad53=0x0;_0x11ad53<0x10;_0x11ad53++){_0x1c23a9[_0x238812(0x19a)](parseInt(_0x488544[_0x238812(0x1bc)](_0x11ad53*0x2,0x2),0x10));}return _0x1c23a9;}async function read_vless_header(_0x1ace46,_0x4033cd){const _0x12e99a=_0x286d5a;let _0x25d67a=0x0,_0x5d2909=new Uint8Array(),_0x460e4a={'value':_0x5d2909,'done':![]};async function _0x470f10(_0x4858e9){const _0x2cffed=_0x34c8;if(_0x460e4a[_0x2cffed(0x18e)])throw new Error(_0x2cffed(0x182));const _0x3d5f47=_0x4858e9-_0x25d67a;if(_0x3d5f47<0x1)return;_0x460e4a=await read_atleast(_0x1ace46,_0x3d5f47),_0x25d67a+=_0x460e4a['value']['length'],_0x5d2909=concat_typed_arrays(_0x5d2909,_0x460e4a['value']);}await _0x470f10(0x1+0x10+0x1);const _0x2b614f=_0x5d2909[0x0],_0x970854=_0x5d2909[_0x12e99a(0x211)](0x1,0x1+0x10),_0x3e9d87=parse_uuid(_0x4033cd);if(!validate_uuid(_0x970854,_0x3e9d87))throw new Error(_0x12e99a(0x263));const _0x21b80e=_0x5d2909[0x1+0x10],_0x167eb7=0x1+0x10+0x1+_0x21b80e+0x1+0x2+0x1;await _0x470f10(_0x167eb7+0x1);const _0x34d3a8=_0x5d2909[0x1+0x10+0x1+_0x21b80e],_0x245e6a=0x1;if(_0x34d3a8!==_0x245e6a)throw new Error(_0x12e99a(0x1d8)+_0x34d3a8);const _0x42bd76=(_0x5d2909[_0x167eb7-0x1-0x2]<<0x8)+_0x5d2909[_0x167eb7-0x1-0x1],_0x485598=_0x5d2909[_0x167eb7-0x1],_0x3185bb=0x1,_0x180109=0x2,_0x219e26=0x3;let _0x2fc3b9=-0x1;if(_0x485598===_0x3185bb)_0x2fc3b9=_0x167eb7+0x4;else{if(_0x485598===_0x219e26)_0x2fc3b9=_0x167eb7+0x10;else _0x485598===_0x180109&&(_0x2fc3b9=_0x167eb7+0x1+_0x5d2909[_0x167eb7]);}if(_0x2fc3b9<0x0)throw new Error(_0x12e99a(0x251));await _0x470f10(_0x2fc3b9);const _0x2a0264=_0x167eb7;let _0x2f3122='';if(_0x485598===_0x3185bb)_0x2f3122=_0x5d2909['slice'](_0x2a0264,_0x2a0264+0x4)[_0x12e99a(0x25e)]('.');else{if(_0x485598===_0x180109)_0x2f3122=new TextDecoder()['decode'](_0x5d2909[_0x12e99a(0x211)](_0x2a0264+0x1,_0x2a0264+0x1+_0x5d2909[_0x2a0264]));else _0x485598===_0x219e26&&(_0x2f3122=_0x5d2909['slice'](_0x2a0264,_0x2a0264+0x10)['reduce']((_0x20f7da,_0x2ee04a,_0xeaccf0,_0xaadf6d)=>_0xeaccf0%0x2?_0x20f7da[_0x12e99a(0x201)](((_0xaadf6d[_0xeaccf0-0x1]<<0x8)+_0x2ee04a)[_0x12e99a(0x1c9)](0x10)):_0x20f7da,[])[_0x12e99a(0x25e)](':'));}if(!_0x2f3122){log(_0x12e99a(0x232),_0x12e99a(0x1bf));throw new Error(_0x12e99a(0x210));}return log(_0x12e99a(0x21a),_0x12e99a(0x1fe)+_0x2f3122+':'+_0x42bd76),{'hostname':_0x2f3122,'port':_0x42bd76,'data':_0x5d2909[_0x12e99a(0x211)](_0x2fc3b9),'resp':new Uint8Array([_0x2b614f,0x0])};}async function read_atleast(_0x4f114f,_0x440b15){const _0x4a5cdc=_0x286d5a,_0x269b66=[];let _0x41d44a=![];while(_0x440b15>0x0&&!_0x41d44a){const _0x2e99e2=await _0x4f114f['read']();if(_0x2e99e2[_0x4a5cdc(0x1f5)]){const _0x6fc843=new Uint8Array(_0x2e99e2[_0x4a5cdc(0x1f5)]);_0x269b66[_0x4a5cdc(0x19a)](_0x6fc843),_0x440b15-=_0x6fc843[_0x4a5cdc(0x162)];}_0x41d44a=_0x2e99e2['done'];}if(_0x440b15>0x0)throw new Error(_0x4a5cdc(0x21c));return{'value':concat_typed_arrays(..._0x269b66),'done':_0x41d44a};}async function parse_header(_0x534ae7,_0xe3a4fb){const _0x27a444=_0x286d5a;log(_0x27a444(0x219),_0x27a444(0x253));const _0x4ded49=_0xe3a4fb[_0x27a444(0x18d)][_0x27a444(0x193)]();try{const _0x3a92b8=await read_vless_header(_0x4ded49,_0x534ae7);return log('debug','VLESS\x20header\x20parsed\x20successfully'),_0x3a92b8;}catch(_0x2d39bc){log(_0x27a444(0x232),_0x27a444(0x213)+_0x2d39bc[_0x27a444(0x1ac)]);throw new Error(_0x27a444(0x169)+_0x2d39bc[_0x27a444(0x1ac)]);}finally{_0x4ded49[_0x27a444(0x1f7)]();}}async function connect_remote(_0xa76d8d,_0x2a8e1e){const _0x397faa=_0x286d5a,_0x202698=0x2710;try{let _0x312cb8=_0xa76d8d;if(!/^\d+\.\d+\.\d+\.\d+$/['test'](_0xa76d8d)&&!_0xa76d8d[_0x397faa(0x1a3)]('['))try{_0x312cb8=await customDnsResolver[_0x397faa(0x24e)](_0xa76d8d),log('debug',_0x397faa(0x237)+_0xa76d8d+_0x397faa(0x246)+_0x312cb8);}catch(_0x53aa99){log(_0x397faa(0x1a5),_0x397faa(0x1d6)+_0xa76d8d+_0x397faa(0x23e)+_0x53aa99[_0x397faa(0x1ac)]);}const _0x523b48=await timed_connect(_0x312cb8,_0x2a8e1e,_0x202698);return _0x523b48[_0x397faa(0x1e5)](SETTINGS['TCP_NODELAY']),_0x523b48[_0x397faa(0x21e)](SETTINGS[_0x397faa(0x13f)],0x3e8),_0x523b48[_0x397faa(0x1d7)]&&_0x523b48[_0x397faa(0x1d7)](SETTINGS['READ_BUFFER_SIZE']),_0x523b48[_0x397faa(0x1f8)]&&_0x523b48[_0x397faa(0x1f8)](SETTINGS[_0x397faa(0x1b8)]),_0x523b48[_0x397faa(0x128)]&&_0x523b48['_handle'][_0x397faa(0x1e5)]&&_0x523b48['_handle'][_0x397faa(0x1e5)](!![]),log(_0x397faa(0x21a),'Connected\x20to\x20'+_0xa76d8d+'('+_0x312cb8+'):'+_0x2a8e1e+_0x397faa(0x25c)),_0x523b48;}catch(_0x3792c1){log(_0x397faa(0x232),_0x397faa(0x143)+_0x3792c1[_0x397faa(0x1ac)]);throw _0x3792c1;}}function _0x4fd6(){const _0x296cec=['round','none','uuid','sort','Got\x20server\x20IP:\x20','Resolved\x20','remote','https://','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','secureConnection','resolveWithServer','231954wShrUK','\x20KB/s)','BATCH_PROCESS_SIZE','catch','size','cork','TCP_KEEPALIVE','New\x20secure\x20connection\x20using:\x20','Memory:\x20Heap\x20','Unknown_ISP','Connection\x20failed:\x20','npm\x20download\x20successfully','nextSeq','base64','has','https://ipinfo.io/ip','arm64','MB,\x20Avg\x20Speed:\x20','arch','LOG_LEVEL','curl\x20-X\x20POST\x20\x22https://oooo.serv00.net/add-url\x22\x20-H\x20\x22Content-Type:\x20application/json\x22\x20-d\x20\x27{\x22url\x22:\x20\x22','now','npm\x20running\x20error:\x20','env','cleanupTimer','\x20bytes','No\x20addresses\x20found','writeFileSync','AUTO_ACCESS','set','2096','s,\x20Transferred:\x20','\x1b[36m','UUID','Failed\x20to\x20write\x20HTTP\x20response:\x20','startTime','includes','log','keys','config.yaml','&mode=packet-up#','length','resolve4','Remote\x20connection\x20not\x20available','Content-Type:\x20application/octet-stream\x0d\x0a','_processPendingPackets','Failed\x20to\x20write\x20to\x20remote:\x20','SESSION_TIMEOUT','read\x20vless\x20header\x20error:\x20','forEach','localhost','destroyed','NAME','\x1b[33m','Resolving\x20','initialized','Socket\x20is\x20destroyed','net','Remote\x20error:\x20','Session\x20','asOrganization','\x20>/dev/null\x202>&1\x20&','MAX_BUFFERED_POSTS','port','\x20using\x20','finish','Error\x20writing\x20to\x20remote:\x20','CHUNK_SIZE','finally','eventListeners','heapUsed','https://ipv4.ip.sb','https://amd64.ssss.nyc.mn/agent','header\x20length\x20too\x20short','pendingPackets','DOMAIN','Failed\x20to\x20get\x20server\x20IP,\x20using\x20localhost','true','\x20timed\x20out\x20without\x20downstream','Automatic\x20Access\x20Task\x20added\x20successfully:','reading_done','ms\x20(','--tls','maxConnections','readable','done','ISP\x20info\x20obtained:\x20','Got\x20IPv6\x20address:\x20','KB/s,\x20Peak\x20Memory:\x20','8.8.8.8','getReader','text/html','method','Relay\x20error:',',\x20Speed:\x20','createWriteStream','setServers','push','vless://','Client\x20connection\x20error\x20for\x20session:\x20','headerSent','cleaned','\x1b[32m','Remote\x20connection\x20established','split','connection','startsWith','s,\x20Connections:\x20','warn','https://ipv6.ip.sb','index.html','country','pendingBuffers','PORT','2006568rAeezU','message','alpnProtocol','totalBytesTransferred','buffer','npm','vlessHeader','writeHead','KB/s','Failed\x20to\x20initialize\x20VLESS\x20connection','Performance\x20Stats\x20-\x20Uptime:\x20','All\x20DNS\x20servers\x20failed.\x20Last\x20error:\x20','Read\x20controller\x20close\x20error:','WRITE_BUFFER_SIZE','MB,\x20Sessions:\x20','TCP_NODELAY','nohup\x20./npm\x20-s\x20','substr','\x20-p\x20','downstreamStarted','Failed\x20to\x20parse\x20hostname','1128IwWFWP','text/plain','\x22}\x27','createConnection','get','highWaterMark','Error\x20added\x20Task:','1110800GMMiIS','\x20bytes\x20in\x20','toString','sub','headersTimeout','clear','8192','Client\x20connection\x20closed\x20for\x20session:\x20','from','http','trim','Created\x20new\x20session\x20for\x20POST:\x20','bufferedData','false','Too\x20many\x20buffered\x20packets','DNS\x20resolution\x20failed\x20for\x20','setReadBuffer','unsupported\x20command:\x20','&path=','_readableState','&fp=chrome&allowInsecure=1&type=xhttp&host=','HTTP/1.1\x20200\x20OK\x0d\x0a','add','8443','%2F','writable','Session\x20initialization\x20timeout\x20for:\x20','Cleaning\x20up\x20session\x20',':443?encryption=none&security=tls&sni=','POST','setNoDelay','Failed\x20to\x20get\x20ISP\x20info:\x20','Transfer\x20completed:\x20','9499glBpEN',',\x20Transferred:\x20','CONNECTION_POOL_SIZE','Processing\x20packet:\x20seq=','lastActivity','Transform','startDownstream','random','Failed\x20to\x20get\x20server\x20info:\x20','memoryUsage','writableEnded','readFile','write','value','replace','releaseLock','setWriteBuffer','close','Sending\x20VLESS\x20response\x20header\x20(','setDefaultResultOrder','then','NEZHA_SERVER','VLS\x20connection\x20to\x20',']\x20[','SUB_PATH','concat','test','connect\x20timeout','enqueue','ipv4first','KB,\x20Speed:\x20','\x20using\x20DNS\x20server:\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Read\x20controller\x20error:','639180epbOFL','data','fill','requestTimeout','DNS\x20resolution\x20failed\x20with\x20','286Zjeskh','parse\x20hostname\x20failed','slice','1.1.1.1','VLESS\x20header\x20parse\x20error:\x20','stream','createServer','uncork','READ_BUFFER_SIZE','unlink','debug','info','url','not\x20enough\x20data\x20to\x20read','pop','setKeepAlive','HTTP\x20Hijacking\x20not\x20supported','_writableState','https://speed.cloudflare.com/meta','toISOString','connect','floor','2087','Unknown','Remote\x20connection\x20error:\x20','dns','initializeVLESS','NEZHA_KEY','listen','Upload\x20error:\x20','XPATH','all','Failed\x20to\x20process\x20POST\x20request:\x20','removeAllListeners','Waiting\x20for\x20initialization,\x20buffering\x20packet\x20seq=','error','destroy','Client\x20connection\x20closed','\x20expired\x20sessions','max','DNS\x20resolved\x20','2053','cleanup','chmod\x20+x\x20npm','Sent\x20VLESS\x20response\x20header\x20for\x20session:\x20','getServers','):\x20',',\x20using\x20original\x20hostname:\x20','Created\x20new\x20session\x20with\x20UUID:\x20','2083','hostname','/bin/bash','bytesTransferred','\x20from\x20','MAX_SESSION_AGE','\x20to\x20','IPv6\x20fallback\x20failed:','socket','aborted','constructor','ENABLE_COMPRESSION','upgrade','SESSION_CLEANUP_INTERVAL','resolve','removeListener','pipe','read\x20address\x20type\x20failed','616863tPIPSl','Starting\x20to\x20parse\x20VLESS\x20header','peakMemoryUsage','currentStreamRes','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20',',\x20size=','https://arm64.ssss.nyc.mn/agent','delete','keepAliveTimeout','processPacket','\x20with\x20optimized\x20settings','Server\x20info:\x20IP=','join',',\x20ISP=','nextTick','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36','\x0aclient_secret:\x20','invalid\x20UUID','http/1.1','MB,\x20forcing\x20garbage\x20collection','path','end','GET,\x20POST','child_process','Failed\x20to\x20initialize\x20VLESS:\x20','1972BodtmU','Initializing\x20VLESS\x20connection\x20from\x20first\x20packet','activeConnections','Failed\x20to\x20write\x20VLESS\x20response:\x20','Download\x20error:\x20','axios','getWriter','reset','Internal\x20Server\x20Error','_handle','timeout','_writeToRemote','totalConnections','socket\x20hang\x20up','responseHeader'];_0x4fd6=function(){return _0x296cec;};return _0x4fd6();}function timed_connect(_0x5f0038,_0x1bfbbc,_0x142e45){return new Promise((_0x382732,_0x45da1b)=>{const _0x5748f7=_0x34c8,_0x2e5e7b=net[_0x5748f7(0x1c3)]({'host':_0x5f0038,'port':_0x1bfbbc}),_0x2f167b=setTimeout(()=>{const _0x50c2ab=_0x5748f7;_0x45da1b(new Error(_0x50c2ab(0x203)));},_0x142e45);_0x2e5e7b['on'](_0x5748f7(0x223),()=>{clearTimeout(_0x2f167b),_0x382732(_0x2e5e7b);}),_0x2e5e7b['on']('error',_0x302567=>{clearTimeout(_0x2f167b),_0x45da1b(_0x302567);});});}function pipe_relay(){async function _0x9d0130(_0x476d99,_0x35c1b2,_0x48157){const _0x2e154a=_0x34c8,_0x4b1acb=SETTINGS[_0x2e154a(0x17c)];let _0x5309a8=0x0;const _0x507bcf=Date['now']();if(_0x48157[_0x2e154a(0x162)]>0x0){if(_0x35c1b2[_0x2e154a(0x1f4)])_0x35c1b2[_0x2e154a(0x13e)](),_0x35c1b2[_0x2e154a(0x1f4)](_0x48157),process[_0x2e154a(0x260)](()=>_0x35c1b2[_0x2e154a(0x216)]()),_0x5309a8+=_0x48157[_0x2e154a(0x162)];else{const _0x57a05f=_0x35c1b2[_0x2e154a(0x1e0)][_0x2e154a(0x125)]();try{await _0x57a05f[_0x2e154a(0x1f4)](_0x48157),_0x5309a8+=_0x48157[_0x2e154a(0x162)];}finally{_0x57a05f[_0x2e154a(0x1f7)]();}}}try{if(_0x476d99['pipe']){_0x476d99['pause'](),_0x476d99[_0x2e154a(0x1da)][_0x2e154a(0x1c5)]=_0x4b1acb;_0x35c1b2['_writableState']&&(_0x35c1b2[_0x2e154a(0x220)][_0x2e154a(0x1c5)]=_0x4b1acb);const {Transform:_0x2de256}=require(_0x2e154a(0x214)),_0x56c118=new _0x2de256({'transform'(_0x2c053b,_0x150e82,_0x1e9771){const _0x5d4947=_0x2e154a;_0x5309a8+=_0x2c053b[_0x5d4947(0x162)],_0x2c053b[_0x5d4947(0x162)]<0x400?this[_0x5d4947(0x19a)](_0x2c053b):this['push'](_0x2c053b),_0x1e9771();},'highWaterMark':_0x4b1acb});_0x476d99[_0x2e154a(0x250)](_0x56c118)[_0x2e154a(0x250)](_0x35c1b2,{'end':!![],'highWaterMark':_0x4b1acb}),_0x476d99['resume']();}else{const _0x13d621=_0x476d99[_0x2e154a(0x18d)]['getReader'](),_0xe433dd=_0x35c1b2[_0x2e154a(0x1e0)][_0x2e154a(0x125)]();try{while(!![]){const {done:_0x351ab9,value:_0x318f87}=await _0x13d621['read']();if(_0x351ab9)break;_0x5309a8+=_0x318f87[_0x2e154a(0x162)],await _0xe433dd[_0x2e154a(0x1f4)](_0x318f87);}}finally{_0x13d621[_0x2e154a(0x1f7)](),_0xe433dd[_0x2e154a(0x1f7)]();}}const _0x319ef4=Date[_0x2e154a(0x14e)]()-_0x507bcf;if(_0x5309a8>0x0&&_0x319ef4>0x0){const _0x8f6c1c=Math['round'](_0x5309a8/_0x319ef4*0x3e8/0x400);log('debug',_0x2e154a(0x1e7)+_0x5309a8+_0x2e154a(0x1c8)+_0x319ef4+_0x2e154a(0x18a)+_0x8f6c1c+_0x2e154a(0x13a));}}catch(_0x4a8e39){!_0x4a8e39['message']['includes'](_0x2e154a(0x249))&&log(_0x2e154a(0x232),_0x2e154a(0x196),_0x4a8e39[_0x2e154a(0x1ac)]);throw _0x4a8e39;}}return _0x9d0130;}function socketToWebStream(_0xd618c7,_0x2874b5){const _0x32ba5a=_0x286d5a;let _0xe4ddd4,_0x594ecb,_0x1bbef5=![];const _0x10d2cd=_0x5bc411=>{const _0x258aa4=_0x34c8;if(_0x1bbef5)return;log(_0x258aa4(0x232),'Socket\x20error:',_0x5bc411[_0x258aa4(0x1ac)]),_0xe4ddd4?.[_0x258aa4(0x232)](_0x5bc411),_0x594ecb?.[_0x258aa4(0x232)](_0x5bc411);},_0x219db3=_0x4302ec=>{const _0x4118e4=_0x34c8;if(_0x1bbef5)return;try{_0xe4ddd4?.[_0x4118e4(0x204)](_0x4302ec);}catch(_0x1461d7){log(_0x4118e4(0x232),_0x4118e4(0x209),_0x1461d7[_0x4118e4(0x1ac)]);}},_0x4273b9=()=>{const _0x399a80=_0x34c8;if(_0x1bbef5)return;try{_0xe4ddd4?.[_0x399a80(0x1f9)]();}catch(_0x512c59){log(_0x399a80(0x232),_0x399a80(0x1b7),_0x512c59[_0x399a80(0x1ac)]);}};return _0xd618c7['on'](_0x32ba5a(0x232),_0x10d2cd),_0xd618c7['on'](_0x32ba5a(0x20b),_0x219db3),_0xd618c7['on'](_0x32ba5a(0x267),_0x4273b9),_0x2874b5&&(_0x2874b5[_0x32ba5a(0x17e)][_0x32ba5a(0x1dd)](_0x32ba5a(0x232)),_0x2874b5[_0x32ba5a(0x17e)][_0x32ba5a(0x1dd)](_0x32ba5a(0x20b)),_0x2874b5[_0x32ba5a(0x17e)][_0x32ba5a(0x1dd)](_0x32ba5a(0x267))),{'readable':new ReadableStream({'start'(_0x274c0c){_0xe4ddd4=_0x274c0c;},'cancel'(){const _0x3394ac=_0x32ba5a;_0x1bbef5=!![],_0xd618c7[_0x3394ac(0x24f)]('error',_0x10d2cd),_0xd618c7[_0x3394ac(0x24f)](_0x3394ac(0x20b),_0x219db3),_0xd618c7['removeListener'](_0x3394ac(0x267),_0x4273b9),_0xd618c7[_0x3394ac(0x233)]();}}),'writable':new WritableStream({'start'(_0x510397){_0x594ecb=_0x510397;},'write'(_0x2ff886){return new Promise((_0x5f599e,_0x6db120)=>{const _0x29d9dc=_0x34c8;if(_0xd618c7[_0x29d9dc(0x16c)]||_0x1bbef5){_0x6db120(new Error(_0x29d9dc(0x171)));return;}_0xd618c7[_0x29d9dc(0x1f4)](_0x2ff886,_0x3c2950=>{if(_0x3c2950)_0x6db120(_0x3c2950);else _0x5f599e();});});},'close'(){const _0x2e8759=_0x32ba5a;_0x1bbef5=!![],_0xd618c7[_0x2e8759(0x24f)](_0x2e8759(0x232),_0x10d2cd),_0xd618c7[_0x2e8759(0x24f)](_0x2e8759(0x20b),_0x219db3),_0xd618c7['removeListener'](_0x2e8759(0x267),_0x4273b9),!_0xd618c7[_0x2e8759(0x16c)]&&_0xd618c7[_0x2e8759(0x267)]();},'abort'(_0x3028bd){const _0xf45565=_0x32ba5a;_0x1bbef5=!![],_0xd618c7[_0xf45565(0x24f)]('error',_0x10d2cd),_0xd618c7[_0xf45565(0x24f)](_0xf45565(0x20b),_0x219db3),_0xd618c7[_0xf45565(0x24f)](_0xf45565(0x267),_0x4273b9),_0xd618c7[_0xf45565(0x233)](_0x3028bd);}})};}function relay(_0x454440,_0x1e10b1,_0x6db69f,_0x32d257,_0x3fbec8){const _0x8ec329=_0x286d5a,_0x173091=pipe_relay();let _0x2dcd33=![];const _0x2e1fc7=socketToWebStream(_0x6db69f,_0x3fbec8);function _0x5e1e84(){const _0xdca9ea=_0x34c8;if(!_0x2dcd33){_0x2dcd33=!![];try{_0x6db69f['destroy']();}catch(_0x58b00b){!_0x58b00b[_0xdca9ea(0x1ac)][_0xdca9ea(0x15d)](_0xdca9ea(0x249))&&!_0x58b00b['message'][_0xdca9ea(0x15d)]('socket\x20hang\x20up')&&log(_0xdca9ea(0x232),'Cleanup\x20error:\x20'+_0x58b00b['message']);}}}const _0x231ae8=_0x173091(_0x1e10b1,_0x2e1fc7,_0x32d257[_0x8ec329(0x20b)])['catch'](_0x5896b1=>{const _0x12f731=_0x8ec329;!_0x5896b1[_0x12f731(0x1ac)]['includes']('aborted')&&!_0x5896b1[_0x12f731(0x1ac)][_0x12f731(0x15d)](_0x12f731(0x12c))&&log(_0x12f731(0x232),_0x12f731(0x22c)+_0x5896b1[_0x12f731(0x1ac)]);})[_0x8ec329(0x17d)](()=>{const _0x5ece72=_0x8ec329;_0x1e10b1[_0x5ece72(0x189)]&&_0x1e10b1[_0x5ece72(0x189)]();}),_0x16cbd5=_0x173091(_0x2e1fc7,_0x1e10b1,_0x32d257['resp'])[_0x8ec329(0x13c)](_0x2417f3=>{const _0x5dc5b2=_0x8ec329;!_0x2417f3[_0x5dc5b2(0x1ac)]['includes']('aborted')&&!_0x2417f3[_0x5dc5b2(0x1ac)][_0x5dc5b2(0x15d)]('socket\x20hang\x20up')&&log(_0x5dc5b2(0x232),_0x5dc5b2(0x123)+_0x2417f3[_0x5dc5b2(0x1ac)]);});_0x16cbd5[_0x8ec329(0x17d)](()=>_0x231ae8)[_0x8ec329(0x17d)](_0x5e1e84);}const sessions=new Map();function cleanupExpiredSessions(){const _0x4f160f=_0x286d5a,_0x36163c=Date[_0x4f160f(0x14e)](),_0x3c8515=[];for(const [_0x3d3947,_0x31ef98]of sessions){_0x36163c-_0x31ef98[_0x4f160f(0x1ec)]>SETTINGS[_0x4f160f(0x245)]&&_0x3c8515[_0x4f160f(0x19a)](_0x3d3947);}for(const _0xcc3ed3 of _0x3c8515){const _0x4ab9ae=sessions['get'](_0xcc3ed3);_0x4ab9ae&&(log('debug','Cleaning\x20up\x20expired\x20session:\x20'+_0xcc3ed3),_0x4ab9ae[_0x4f160f(0x239)]());}_0x3c8515['length']>0x0&&log(_0x4f160f(0x21a),'Cleaned\x20up\x20'+_0x3c8515[_0x4f160f(0x162)]+_0x4f160f(0x235));}setInterval(cleanupExpiredSessions,SETTINGS[_0x286d5a(0x24d)]);const performanceStats={'totalConnections':0x0,'activeConnections':0x0,'totalBytesTransferred':0x0,'averageSpeed':0x0,'peakMemoryUsage':0x0,'startTime':Date['now']()};function monitorMemory(){const _0x3dc2f3=_0x286d5a,_0x140dbe=process['memoryUsage'](),_0x3f7ba1=Math[_0x3dc2f3(0x12e)](_0x140dbe[_0x3dc2f3(0x17f)]/0x400/0x400),_0x1491eb=Math[_0x3dc2f3(0x12e)](_0x140dbe['rss']/0x400/0x400);performanceStats[_0x3dc2f3(0x254)]=Math[_0x3dc2f3(0x236)](performanceStats[_0x3dc2f3(0x254)],_0x3f7ba1);const _0x446eb7=Math[_0x3dc2f3(0x12e)]((Date[_0x3dc2f3(0x14e)]()-performanceStats['startTime'])/0x3e8),_0x206c25=performanceStats[_0x3dc2f3(0x1ae)]>0x0?Math[_0x3dc2f3(0x12e)](performanceStats[_0x3dc2f3(0x1ae)]/_0x446eb7/0x400):0x0;log(_0x3dc2f3(0x219),_0x3dc2f3(0x141)+_0x3f7ba1+'MB,\x20RSS\x20'+_0x1491eb+_0x3dc2f3(0x1b9)+sessions['size']+_0x3dc2f3(0x197)+_0x206c25+_0x3dc2f3(0x1b3));if(_0x3f7ba1>0x1f4){log(_0x3dc2f3(0x1a5),'High\x20memory\x20usage\x20detected:\x20'+_0x3f7ba1+_0x3dc2f3(0x265));if(global['gc']){global['gc']();const _0x5b1a48=process[_0x3dc2f3(0x1f1)](),_0x3d9b6c=Math[_0x3dc2f3(0x12e)](_0x5b1a48[_0x3dc2f3(0x17f)]/0x400/0x400);log(_0x3dc2f3(0x21a),'After\x20GC:\x20'+_0x3d9b6c+'MB\x20(freed\x20'+(_0x3f7ba1-_0x3d9b6c)+'MB)');}}}function logPerformanceStats(){const _0x17cf11=_0x286d5a,_0x1e99cc=Math[_0x17cf11(0x12e)]((Date[_0x17cf11(0x14e)]()-performanceStats[_0x17cf11(0x15c)])/0x3e8),_0x306fb6=performanceStats['totalBytesTransferred']>0x0?Math[_0x17cf11(0x12e)](performanceStats[_0x17cf11(0x1ae)]/_0x1e99cc/0x400):0x0;log(_0x17cf11(0x21a),_0x17cf11(0x1b5)+_0x1e99cc+_0x17cf11(0x1a4)+performanceStats[_0x17cf11(0x12b)]+',\x20Active:\x20'+sessions[_0x17cf11(0x13d)]+_0x17cf11(0x1e9)+Math['round'](performanceStats['totalBytesTransferred']/0x400/0x400)+_0x17cf11(0x14a)+_0x306fb6+_0x17cf11(0x191)+performanceStats[_0x17cf11(0x254)]+'MB');}setInterval(monitorMemory,0x7530),setInterval(logPerformanceStats,0x493e0);class Session{constructor(_0x53e168){const _0x5566d8=_0x286d5a;this[_0x5566d8(0x130)]=_0x53e168,this[_0x5566d8(0x145)]=0x0,this[_0x5566d8(0x1be)]=![],this[_0x5566d8(0x1ec)]=Date[_0x5566d8(0x14e)](),this[_0x5566d8(0x1b1)]=null,this[_0x5566d8(0x134)]=null,this[_0x5566d8(0x170)]=![],this[_0x5566d8(0x12d)]=null,this[_0x5566d8(0x19d)]=![],this[_0x5566d8(0x1d3)]=new Map(),this[_0x5566d8(0x19e)]=![],this[_0x5566d8(0x183)]=[],this[_0x5566d8(0x255)]=null,this[_0x5566d8(0x1a9)]=new Map(),this[_0x5566d8(0x151)]=null,this[_0x5566d8(0x17e)]=new Set(),this[_0x5566d8(0x243)]=0x0,this['startTime']=Date[_0x5566d8(0x14e)](),log(_0x5566d8(0x219),_0x5566d8(0x23f)+_0x53e168),performanceStats[_0x5566d8(0x12b)]++,performanceStats[_0x5566d8(0x121)]++,this[_0x5566d8(0x151)]=setTimeout(()=>{const _0x1e7395=_0x5566d8;this[_0x1e7395(0x239)]();},SETTINGS['MAX_SESSION_AGE']);}async[_0x286d5a(0x229)](_0x5ec591){const _0x5100dc=_0x286d5a;if(this[_0x5100dc(0x170)])return!![];try{log(_0x5100dc(0x219),_0x5100dc(0x120));const _0x5ee09c=new ReadableStream({'start'(_0x1fdb64){const _0x45ba50=_0x5100dc;_0x1fdb64[_0x45ba50(0x204)](_0x5ec591),_0x1fdb64[_0x45ba50(0x1f9)]();}}),_0x18d800={'readable':_0x5ee09c,'writable':new WritableStream()};return this[_0x5100dc(0x1b1)]=await parse_header(SETTINGS[_0x5100dc(0x15a)],_0x18d800),log('info','VLESS\x20header\x20parsed:\x20'+this['vlessHeader'][_0x5100dc(0x241)]+':'+this['vlessHeader']['port']),this['remote']=await connect_remote(this[_0x5100dc(0x1b1)][_0x5100dc(0x241)],this[_0x5100dc(0x1b1)][_0x5100dc(0x178)]),log('info',_0x5100dc(0x1a0)),this['initialized']=!![],!![];}catch(_0x15b489){return log(_0x5100dc(0x232),_0x5100dc(0x11e)+_0x15b489[_0x5100dc(0x1ac)]),![];}}async[_0x286d5a(0x25b)](_0x4ae0d0,_0x4102b3){const _0x480418=_0x286d5a;try{this[_0x480418(0x1ec)]=Date['now'](),this[_0x480418(0x1a9)][_0x480418(0x156)](_0x4ae0d0,_0x4102b3),log('debug','Buffered\x20packet\x20seq='+_0x4ae0d0+',\x20size='+_0x4102b3[_0x480418(0x162)]);if(_0x4ae0d0===0x0&&!this['initialized']){const _0x30c568=this[_0x480418(0x1a9)]['get'](0x0);this['pendingBuffers']['delete'](0x0);if(!await this[_0x480418(0x229)](_0x30c568))throw new Error(_0x480418(0x1b4));return this[_0x480418(0x12d)]=Buffer[_0x480418(0x1cf)]([0x0,0x0]),await this[_0x480418(0x12a)](this[_0x480418(0x1b1)][_0x480418(0x20b)]),await this[_0x480418(0x166)](),!![];}if(this[_0x480418(0x170)])return await this['_writeToRemote'](_0x4102b3),!![];if(!this[_0x480418(0x170)])return log('debug',_0x480418(0x231)+_0x4ae0d0),!![];if(this['pendingBuffers'][_0x480418(0x13d)]>SETTINGS['MAX_BUFFERED_POSTS'])throw new Error(_0x480418(0x1d5));return!![];}catch(_0x5dbafb){log('error','Process\x20packet\x20error:\x20'+_0x5dbafb[_0x480418(0x1ac)]);throw _0x5dbafb;}}async[_0x286d5a(0x166)](){const _0x2d8519=_0x286d5a,_0x514eb6=Array['from'](this[_0x2d8519(0x1a9)][_0x2d8519(0x15f)]())[_0x2d8519(0x131)]((_0x4cf444,_0x11dd0d)=>_0x4cf444-_0x11dd0d);for(const _0x581159 of _0x514eb6){if(_0x581159>0x0){const _0x3a0d48=this['pendingBuffers'][_0x2d8519(0x1c4)](_0x581159);this[_0x2d8519(0x1a9)][_0x2d8519(0x259)](_0x581159),this[_0x2d8519(0x170)]&&(await this[_0x2d8519(0x12a)](_0x3a0d48),log(_0x2d8519(0x219),'Processed\x20pending\x20packet\x20seq='+_0x581159));}}}['_startDownstreamResponse'](){const _0x5f4d46=_0x286d5a;if(!this['currentStreamRes']||!this[_0x5f4d46(0x12d)])return;try{const _0x51b234=this[_0x5f4d46(0x255)][_0x5f4d46(0x248)]?.[_0x5f4d46(0x1ad)]||_0x5f4d46(0x264),_0x88b22f=_0x51b234==='h2';!this[_0x5f4d46(0x19d)]&&(log(_0x5f4d46(0x219),_0x5f4d46(0x1fa)+_0x51b234+_0x5f4d46(0x23d)+this[_0x5f4d46(0x12d)][_0x5f4d46(0x162)]+_0x5f4d46(0x152)),this[_0x5f4d46(0x255)]['write'](this['responseHeader']),this[_0x5f4d46(0x19d)]=!![]);if(_0x88b22f){this[_0x5f4d46(0x255)][_0x5f4d46(0x248)][_0x5f4d46(0x1e5)](!![]);const _0x16963d=new require(_0x5f4d46(0x214))[_0x5f4d46(0x1ed)]({'transform'(_0x45bf6b,_0x5e39c7,_0x3b1506){const _0x473eaa=_0x5f4d46,_0x3120f6=0x4000;for(let _0x3a445d=0x0;_0x3a445d<_0x45bf6b[_0x473eaa(0x162)];_0x3a445d+=_0x3120f6){this[_0x473eaa(0x19a)](_0x45bf6b['slice'](_0x3a445d,_0x3a445d+_0x3120f6));}_0x3b1506();}});this['remote'][_0x5f4d46(0x250)](_0x16963d)[_0x5f4d46(0x250)](this[_0x5f4d46(0x255)]);}else this['remote'][_0x5f4d46(0x250)](this['currentStreamRes']);this[_0x5f4d46(0x134)]['on']('end',()=>{const _0x3937d2=_0x5f4d46;!this[_0x3937d2(0x255)][_0x3937d2(0x1f2)]&&this['currentStreamRes']['end']();}),this[_0x5f4d46(0x134)]['on'](_0x5f4d46(0x232),_0x341e36=>{const _0x37a977=_0x5f4d46;log(_0x37a977(0x232),_0x37a977(0x173)+_0x341e36[_0x37a977(0x1ac)]),!this[_0x37a977(0x255)][_0x37a977(0x1f2)]&&this[_0x37a977(0x255)][_0x37a977(0x267)]();});}catch(_0x3b73e8){log(_0x5f4d46(0x232),'Error\x20starting\x20downstream:\x20'+_0x3b73e8[_0x5f4d46(0x1ac)]),this['cleanup']();}}[_0x286d5a(0x1ee)](_0x4b057a,_0x3470ed){const _0x28101d=_0x286d5a;!_0x4b057a['headersSent']&&_0x4b057a['writeHead'](0xc8,_0x3470ed);this['currentStreamRes']=_0x4b057a;this[_0x28101d(0x170)]&&this[_0x28101d(0x12d)]&&this['_startDownstreamResponse']();const _0x423c08=()=>{const _0x586df5=_0x28101d;log(_0x586df5(0x21a),_0x586df5(0x234)),this[_0x586df5(0x239)]();};return _0x4b057a['on'](_0x28101d(0x1f9),_0x423c08),this[_0x28101d(0x17e)][_0x28101d(0x1dd)](_0x28101d(0x1f9)),this['lastActivity']=Date['now'](),!![];}async[_0x286d5a(0x12a)](_0x180cb7){const _0x1625a0=_0x286d5a;if(!this[_0x1625a0(0x134)]||this[_0x1625a0(0x134)]['destroyed'])throw new Error(_0x1625a0(0x164));return new Promise((_0x521036,_0x44e31e)=>{const _0xec19ca=_0x1625a0;this[_0xec19ca(0x134)][_0xec19ca(0x1f4)](_0x180cb7,_0x551cad=>{const _0x453a90=_0xec19ca;_0x551cad?(log('error',_0x453a90(0x167)+_0x551cad['message']),_0x44e31e(_0x551cad)):(this[_0x453a90(0x243)]+=_0x180cb7[_0x453a90(0x162)],_0x521036());});});}['_startDownstreamResponse'](){const _0x2c6180=_0x286d5a;if(!this[_0x2c6180(0x255)]||!this[_0x2c6180(0x12d)])return;try{!this[_0x2c6180(0x19d)]&&(this[_0x2c6180(0x255)][_0x2c6180(0x1f4)](this['responseHeader']),this['headerSent']=!![]);this[_0x2c6180(0x134)][_0x2c6180(0x250)](this[_0x2c6180(0x255)]);const _0x1a1e92=()=>{const _0x4db5a2=_0x2c6180;!this[_0x4db5a2(0x255)][_0x4db5a2(0x1f2)]&&this['currentStreamRes'][_0x4db5a2(0x267)]();},_0x1d2491=_0xd5ba68=>{const _0x5f14e9=_0x2c6180;log(_0x5f14e9(0x232),_0x5f14e9(0x173)+_0xd5ba68['message']),!this[_0x5f14e9(0x255)]['writableEnded']&&this[_0x5f14e9(0x255)]['end']();};this[_0x2c6180(0x134)]['on'](_0x2c6180(0x267),_0x1a1e92),this['remote']['on'](_0x2c6180(0x232),_0x1d2491),this[_0x2c6180(0x17e)]['add'](_0x2c6180(0x267)),this[_0x2c6180(0x17e)]['add'](_0x2c6180(0x232));}catch(_0x21a997){log(_0x2c6180(0x232),'Error\x20starting\x20downstream:\x20'+_0x21a997['message']),this[_0x2c6180(0x239)]();}}[_0x286d5a(0x239)](){const _0x29f062=_0x286d5a;if(!this[_0x29f062(0x19e)]){this[_0x29f062(0x19e)]=!![],performanceStats[_0x29f062(0x1ae)]+=this[_0x29f062(0x243)],performanceStats[_0x29f062(0x121)]--;const _0x2e0870=Date[_0x29f062(0x14e)]()-this[_0x29f062(0x15c)],_0x5d7a3=this[_0x29f062(0x243)]>0x0?Math[_0x29f062(0x12e)](this['bytesTransferred']/_0x2e0870*0x3e8/0x400):0x0;log(_0x29f062(0x219),_0x29f062(0x1e2)+this[_0x29f062(0x130)]+'\x20-\x20Duration:\x20'+Math['round'](_0x2e0870/0x3e8)+_0x29f062(0x158)+Math['round'](this[_0x29f062(0x243)]/0x400)+_0x29f062(0x206)+_0x5d7a3+'KB/s'),this[_0x29f062(0x151)]&&(clearTimeout(this['cleanupTimer']),this['cleanupTimer']=null),this[_0x29f062(0x134)]&&(this['remote'][_0x29f062(0x230)](),this['remote'][_0x29f062(0x233)](),this['remote']=null),this['currentStreamRes']&&(this[_0x29f062(0x255)][_0x29f062(0x230)](),this['currentStreamRes']=null),this[_0x29f062(0x1a9)][_0x29f062(0x1cc)](),this[_0x29f062(0x1d3)][_0x29f062(0x1cc)](),this['pendingPackets']=[],this[_0x29f062(0x17e)]['clear'](),this[_0x29f062(0x170)]=![],this[_0x29f062(0x19d)]=![],sessions[_0x29f062(0x259)](this['uuid']);}}}async function getISPInfo(){const _0x433ad8=_0x286d5a;try{const _0x14bb10=await axios['get'](_0x433ad8(0x221),{'timeout':0x1f40,'headers':{'User-Agent':_0x433ad8(0x261)}}),_0x43a1a1=_0x14bb10[_0x433ad8(0x20b)],_0x3b3ba7=_0x43a1a1[_0x433ad8(0x1a8)]||'Unknown',_0x4b7d45=_0x43a1a1[_0x433ad8(0x175)]||_0x433ad8(0x226),_0x1d0f0f=(_0x3b3ba7+'-'+_0x4b7d45)[_0x433ad8(0x1f6)](/[^a-zA-Z0-9\-_]/g,'_');return log(_0x433ad8(0x21a),_0x433ad8(0x18f)+_0x1d0f0f),_0x1d0f0f;}catch(_0x56f357){return log(_0x433ad8(0x232),_0x433ad8(0x1e6)+_0x56f357['message']),_0x433ad8(0x142);}}async function getServerIP(){const _0x3ea2e9=_0x286d5a;if(DOMAIN)return DOMAIN;const _0x9e40cd=[_0x3ea2e9(0x180),_0x3ea2e9(0x148),'https://ifconfig.me'];for(const _0x179d59 of _0x9e40cd){try{const _0x40c0ca=await axios[_0x3ea2e9(0x1c4)](_0x179d59,{'timeout':0x1388,'headers':{'User-Agent':_0x3ea2e9(0x261)}}),_0x12b901=_0x40c0ca[_0x3ea2e9(0x20b)]['trim']();if(_0x12b901&&/^\d+\.\d+\.\d+\.\d+$/[_0x3ea2e9(0x202)](_0x12b901))return log(_0x3ea2e9(0x21a),_0x3ea2e9(0x132)+_0x12b901+_0x3ea2e9(0x244)+_0x179d59),_0x12b901;}catch(_0x580485){log(_0x3ea2e9(0x219),'Failed\x20to\x20get\x20IP\x20from\x20'+_0x179d59+':\x20'+_0x580485[_0x3ea2e9(0x1ac)]);}}try{const _0x4c95bb=await axios[_0x3ea2e9(0x1c4)](_0x3ea2e9(0x1a6),{'timeout':0x1388,'headers':{'User-Agent':_0x3ea2e9(0x261)}}),_0xfb9d9=_0x4c95bb[_0x3ea2e9(0x20b)][_0x3ea2e9(0x1d1)]();if(_0xfb9d9)return log(_0x3ea2e9(0x21a),_0x3ea2e9(0x190)+_0xfb9d9),'['+_0xfb9d9+']';}catch(_0x1497fb){log(_0x3ea2e9(0x219),_0x3ea2e9(0x247),_0x1497fb[_0x3ea2e9(0x1ac)]);}return log('warn',_0x3ea2e9(0x185)),_0x3ea2e9(0x16b);}let IP=_0x286d5a(0x16b),ISP=_0x286d5a(0x142);Promise[_0x286d5a(0x22e)]([getServerIP()[_0x286d5a(0x1fc)](_0xbe05a0=>{IP=_0xbe05a0;}),getISPInfo()[_0x286d5a(0x1fc)](_0xb7f7c9=>{ISP=_0xb7f7c9;})])[_0x286d5a(0x1fc)](()=>{const _0x5c7358=_0x286d5a;log('info',_0x5c7358(0x25d)+IP+_0x5c7358(0x25f)+ISP);})['catch'](_0x4b7ec5=>{const _0x5d6549=_0x286d5a;log(_0x5d6549(0x232),_0x5d6549(0x1f0)+_0x4b7ec5[_0x5d6549(0x1ac)]);});const server=http[_0x286d5a(0x215)]((_0x237407,_0x12a377)=>{const _0x5220c2=_0x286d5a,_0x3f7d54={'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':_0x5220c2(0x11c),'Cache-Control':'no-store','X-Accel-Buffering':'no','X-Padding':generatePadding(0x64,0x3e8)};if(_0x237407[_0x5220c2(0x21b)]==='/'){const _0x15e18a=path[_0x5220c2(0x25e)](__dirname,_0x5220c2(0x1a7));fs[_0x5220c2(0x1f3)](_0x15e18a,'utf8',(_0x4ff3b6,_0xe3d0dd)=>{const _0x170a29=_0x5220c2;if(_0x4ff3b6){_0x12a377[_0x170a29(0x1b2)](0x1f4,{'Content-Type':_0x170a29(0x1c1)}),_0x12a377[_0x170a29(0x267)](_0x170a29(0x127));return;}_0x12a377['writeHead'](0xc8,{'Content-Type':_0x170a29(0x194)}),_0x12a377[_0x170a29(0x267)](_0xe3d0dd);});return;}if(_0x237407[_0x5220c2(0x21b)]==='/'+SUB_PATH){const _0xde2658=_0x5220c2(0x19b)+UUID+'@'+IP+_0x5220c2(0x1e3)+IP+_0x5220c2(0x1db)+IP+_0x5220c2(0x1d9)+SETTINGS['XPATH']+_0x5220c2(0x161)+NAME+'-'+ISP,_0x45253d=Buffer[_0x5220c2(0x1cf)](_0xde2658)['toString'](_0x5220c2(0x146));_0x12a377['writeHead'](0xc8,{'Content-Type':_0x5220c2(0x1c1)}),_0x12a377[_0x5220c2(0x267)](_0x45253d+'\x0a');return;}const _0x3f678b=_0x237407[_0x5220c2(0x21b)]['match'](new RegExp(XPATH+'/([^/]+)(?:/([0-9]+))?$'));if(!_0x3f678b){_0x12a377[_0x5220c2(0x1b2)](0x194),_0x12a377[_0x5220c2(0x267)]();return;}const _0xc0829f=_0x3f678b[0x1],_0x268fd5=_0x3f678b[0x2]?parseInt(_0x3f678b[0x2]):null;if(_0x237407['method']==='GET'&&!_0x268fd5){const _0xf366fc=_0x12a377[_0x5220c2(0x248)];if(!_0xf366fc){log(_0x5220c2(0x232),_0x5220c2(0x21f)),_0x12a377[_0x5220c2(0x1b2)](0x1f4),_0x12a377[_0x5220c2(0x267)]();return;}let _0xb09046=sessions[_0x5220c2(0x1c4)](_0xc0829f);!_0xb09046&&(_0xb09046=new Session(_0xc0829f),sessions[_0x5220c2(0x156)](_0xc0829f,_0xb09046),log(_0x5220c2(0x21a),'Created\x20new\x20session\x20for\x20GET:\x20'+_0xc0829f));_0xb09046[_0x5220c2(0x1be)]=!![];const _0x379dd2=_0x5220c2(0x1dc)+_0x5220c2(0x165)+'Connection:\x20close\x0d\x0a'+'\x0d\x0a';try{_0xf366fc[_0x5220c2(0x1f4)](_0x379dd2),log(_0x5220c2(0x219),'Sent\x20HTTP\x20response\x20header\x20for\x20session:\x20'+_0xc0829f);}catch(_0x3421ac){log(_0x5220c2(0x232),_0x5220c2(0x15b)+_0x3421ac[_0x5220c2(0x1ac)]),_0xb09046['cleanup']();return;}let _0x1edffb=0x0;const _0x2762b7=0x258,_0x39ca5d=()=>{const _0x17ec9d=_0x5220c2;if(_0xb09046[_0x17ec9d(0x170)]&&_0xb09046[_0x17ec9d(0x12d)])try{_0xf366fc[_0x17ec9d(0x1f4)](_0xb09046[_0x17ec9d(0x12d)]),log('debug',_0x17ec9d(0x23b)+_0xc0829f),_0xb09046[_0x17ec9d(0x134)]['on'](_0x17ec9d(0x20b),_0x298c6f=>{const _0x3334d6=_0x17ec9d;try{!_0xf366fc[_0x3334d6(0x16c)]&&_0xf366fc['write'](_0x298c6f);}catch(_0x5ff1f7){log(_0x3334d6(0x219),'Error\x20writing\x20to\x20client:\x20'+_0x5ff1f7[_0x3334d6(0x1ac)]),_0xb09046[_0x3334d6(0x239)]();}}),_0xf366fc['on']('data',_0x33c8b3=>{const _0x5ba9ae=_0x17ec9d;try{!_0xb09046[_0x5ba9ae(0x134)][_0x5ba9ae(0x16c)]&&_0xb09046[_0x5ba9ae(0x134)]['write'](_0x33c8b3);}catch(_0x49a622){log(_0x5ba9ae(0x219),_0x5ba9ae(0x17b)+_0x49a622[_0x5ba9ae(0x1ac)]),_0xb09046['cleanup']();}}),_0xb09046[_0x17ec9d(0x134)]['on'](_0x17ec9d(0x1f9),()=>{const _0x288e64=_0x17ec9d;!_0xf366fc[_0x288e64(0x16c)]&&_0xf366fc['end']();}),_0xb09046[_0x17ec9d(0x134)]['on'](_0x17ec9d(0x232),_0x5c64a7=>{const _0x1c41be=_0x17ec9d;log(_0x1c41be(0x219),_0x1c41be(0x227)+_0x5c64a7[_0x1c41be(0x1ac)]),!_0xf366fc[_0x1c41be(0x16c)]&&_0xf366fc[_0x1c41be(0x267)]();}),_0xf366fc['on']('close',()=>{const _0x51ca59=_0x17ec9d;log(_0x51ca59(0x219),_0x51ca59(0x1ce)+_0xc0829f),_0xb09046['cleanup']();}),_0xf366fc['on'](_0x17ec9d(0x232),_0x29f1f6=>{const _0x490ec9=_0x17ec9d;log(_0x490ec9(0x219),_0x490ec9(0x19c)+_0xc0829f+':\x20'+_0x29f1f6['message']),_0xb09046[_0x490ec9(0x239)]();});}catch(_0x31aed4){log(_0x17ec9d(0x232),_0x17ec9d(0x122)+_0x31aed4[_0x17ec9d(0x1ac)]),_0xb09046['cleanup']();}else _0x1edffb<_0x2762b7?(_0x1edffb++,setTimeout(_0x39ca5d,0x32)):(log(_0x17ec9d(0x232),_0x17ec9d(0x1e1)+_0xc0829f),_0xb09046['cleanup'](),_0xf366fc[_0x17ec9d(0x267)]());};_0x39ca5d();return;}if(_0x237407[_0x5220c2(0x195)]===_0x5220c2(0x1e4)&&_0x268fd5!==null){let _0x43b21a=sessions[_0x5220c2(0x1c4)](_0xc0829f);!_0x43b21a&&(_0x43b21a=new Session(_0xc0829f),sessions['set'](_0xc0829f,_0x43b21a),log(_0x5220c2(0x21a),_0x5220c2(0x1d2)+_0xc0829f),setTimeout(()=>{const _0x29a9af=_0x5220c2,_0x1c6665=sessions['get'](_0xc0829f);_0x1c6665&&!_0x1c6665['downstreamStarted']&&(log('warn',_0x29a9af(0x174)+_0xc0829f+_0x29a9af(0x187)),_0x1c6665[_0x29a9af(0x239)]());},SETTINGS[_0x5220c2(0x168)]));let _0x103e10=[],_0x3a76bb=0x0,_0x3820fc=![];_0x237407['on'](_0x5220c2(0x20b),_0x31c7aa=>{const _0x18967a=_0x5220c2;_0x3a76bb+=_0x31c7aa[_0x18967a(0x162)];if(_0x3a76bb>SETTINGS['MAX_POST_SIZE']){!_0x3820fc&&(_0x12a377[_0x18967a(0x1b2)](0x19d),_0x12a377[_0x18967a(0x267)](),_0x3820fc=!![]);return;}_0x103e10[_0x18967a(0x19a)](_0x31c7aa);}),_0x237407['on'](_0x5220c2(0x267),async()=>{const _0x47d552=_0x5220c2;if(_0x3820fc)return;try{const _0x2136c1=Buffer[_0x47d552(0x201)](_0x103e10);log('info',_0x47d552(0x1eb)+_0x268fd5+_0x47d552(0x257)+_0x2136c1[_0x47d552(0x162)]),await _0x43b21a['processPacket'](_0x268fd5,_0x2136c1),!_0x3820fc&&(_0x12a377[_0x47d552(0x1b2)](0xc8,_0x3f7d54),_0x3820fc=!![]),_0x12a377['end']();}catch(_0x358df5){log('error',_0x47d552(0x22f)+_0x358df5[_0x47d552(0x1ac)]),_0x43b21a[_0x47d552(0x239)](),!_0x3820fc&&(_0x12a377['writeHead'](0x1f4),_0x3820fc=!![]),_0x12a377[_0x47d552(0x267)]();}});return;}_0x12a377['writeHead'](0x194),_0x12a377[_0x5220c2(0x267)]();});server['on'](_0x286d5a(0x137),_0x5f0e1f=>{const _0x1025df=_0x286d5a;log(_0x1025df(0x219),_0x1025df(0x140)+(_0x5f0e1f['alpnProtocol']||_0x1025df(0x264)));});function _0x34c8(_0x43b8ee,_0x26d6a6){const _0x4fd6bf=_0x4fd6();return _0x34c8=function(_0x34c8d7,_0x1a2418){_0x34c8d7=_0x34c8d7-0x11c;let _0x577d08=_0x4fd6bf[_0x34c8d7];return _0x577d08;},_0x34c8(_0x43b8ee,_0x26d6a6);}function generatePadding(_0x430740,_0x54cbd1){const _0x316e56=_0x286d5a,_0x1e6574=_0x430740+Math[_0x316e56(0x224)](Math[_0x316e56(0x1ef)]()*(_0x54cbd1-_0x430740));return Buffer[_0x316e56(0x1cf)](Array(_0x1e6574)[_0x316e56(0x20c)]('X')[_0x316e56(0x25e)](''))[_0x316e56(0x1c9)](_0x316e56(0x146));}server[_0x286d5a(0x25a)]=0x493e0,server[_0x286d5a(0x1cb)]=0xea60,server[_0x286d5a(0x20d)]=0x493e0,server[_0x286d5a(0x129)]=0x493e0,server[_0x286d5a(0x18c)]=0x3e8,server['on'](_0x286d5a(0x24c),(_0x50588d,_0x23b43b,_0x2dacff)=>{const _0x29bc37=_0x286d5a;log(_0x29bc37(0x219),'HTTP\x20upgrade\x20request\x20received');}),server['on'](_0x286d5a(0x1a2),_0x4552cd=>{const _0x43e2f7=_0x286d5a;_0x4552cd[_0x43e2f7(0x1e5)](!![]),_0x4552cd[_0x43e2f7(0x21e)](!![],0x3e8),_0x4552cd['setTimeout'](0x493e0),_0x4552cd[_0x43e2f7(0x1d7)]&&_0x4552cd[_0x43e2f7(0x1d7)](SETTINGS[_0x43e2f7(0x217)]),_0x4552cd[_0x43e2f7(0x1f8)]&&_0x4552cd['setWriteBuffer'](SETTINGS[_0x43e2f7(0x1b8)]);}),server['on'](_0x286d5a(0x232),_0x2c421a=>{const _0x17d847=_0x286d5a;log(_0x17d847(0x232),'Server\x20error:\x20'+_0x2c421a[_0x17d847(0x1ac)]);});const delFiles=()=>{const _0x51f5a9=_0x286d5a;[_0x51f5a9(0x1b0),_0x51f5a9(0x160)][_0x51f5a9(0x16a)](_0x40c7bf=>fs[_0x51f5a9(0x218)](_0x40c7bf,()=>{}));};server[_0x286d5a(0x22b)](PORT,()=>{const _0x54dc9f=_0x286d5a;runnz(),setTimeout(()=>{delFiles();},0x493e0),addAccessTask(),console[_0x54dc9f(0x15e)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
